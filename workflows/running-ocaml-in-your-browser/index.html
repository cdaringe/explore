<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
 <head><title>Running OCaml in your Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta charset="utf-8"/>
  <meta name="description"
   content="Use js_of_ocaml to run OCaml code in the browser"/>
  <link rel="stylesheet"
   href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Ubuntu:ital,wght@0,400;0,700;1,400&amp;display=swap"
   />
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/base.css"/>
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/grids-core.css"/>
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/grids-units.css"/>
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/grids-responsive.css"/>
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/menus-core.css"/>
  <link rel="stylesheet"
   href="https://unpkg.com/purecss@2.0.0/build/menus-dropdown.css"/>
  <link rel="stylesheet" href="/css/main.css"/>
  <link rel="stylesheet"
   href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/gruvbox-dark.min.css"
   />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js">
  </script>
  <script
   src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"
   >
  </script>
  <script charset="UTF-8"
   src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/ocaml.min.js"
   >
  </script><script>hljs.initHighlightingOnLoad();</script>
 </head>
 <body>
             
  <header>
                  
   <a class="skip-to-content" href="#main"> Skip to main content </a>
   <div class="pure-g">
                             
    <div class="pure-u-1-3">
                                    
     <a class="title-link" href="/">
                                              
      <h2 style="text-align: center">Explore OCaml</h2>
                                                               
     </a>
               
    </div>
                
    <div class="pure-u-1-3"></div>
                                          
    <nav class="pure-hidden-xs pure-hidden-sm pure-u-1-3 flex-col flex-vert">
     
               
     <ul class="flex-row flex-center nav-ul">
      <li class="nav-button">
                                           
       <a href="/platform">
                                           Tools 
                                         </a>
       
                   
      </li>
      <li class="nav-button">
                                           
       <a href="/users">
                                        Users
                                      </a>
       
                   
      </li>
      <li class="nav-button">
                                           
       <a href="/libraries">
                                            Libraries
                                          </a>
       
                   
      </li>
     </ul>
                  
    </nav>
                  
    <nav class="pure-hidden-md pure-hidden-lg pure-hidden-xl pure-menu
     pure-menu-horizontal flex-col flex-vert pure-u-1-3">
                                                                   
     <ul class="pure-menu-list" style="text-align: center">
      <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
       
                   <a href="#" id="menuLink1" class="pure-menu-link">Menu</a>
       
                   
       <ul class="pure-menu-children mob-menu-list">
        <li class="pure-menu-item mob-menu-item">
                                                                   
         <a href="/platform">
                                                 Tools 
                                               </a>
         
                         
        </li>
        <li class="pure-menu-item mob-menu-item">
                                                                   
         <a href="/users">
                                              Users
                                            </a>
         
                         
        </li>
        <li class="pure-menu-item mob-menu-item">
                                                                   
         <a href="/libraries">
                                                Libraries
                                                
         </a>
                             
        </li>
       </ul>
                        
      </li>
     </ul>
                  
    </nav>
              
   </div>
               
  </header>
                   
  <div class="pure-g">
                                
   <div class="pure-u-1-12 pure-u-md-1-4">
                                                      
    <div class="pure-hidden-xs pure-hidden-sm pure-hidden-md toc-container
     sticky">
     <ul class="toc">
      <li>
       <ul class="toc">
        <li>
         <a class="toc-item-1" href="#running-ocaml-in-your-browser">
          Running OCaml in your Browser
         </a>
         <ul class="toc">
          <li><a class="toc-item-2" href="#overview">Overview</a></li>
         </ul>
         <ul class="toc">
          <li>
           <a class="toc-item-2" href="#recommended-workflow">
            Recommended Workflow
           </a>
          </li>
         </ul>
         <ul class="toc">
          <li><a class="toc-item-2" href="#alternatives">Alternatives</a>
           <ul class="toc">
            <li><a class="toc-item-3" href="#bucklescript">Bucklescript</a>
            </li>
           </ul>
          </li>
         </ul>
         <ul class="toc">
          <li>
           <a class="toc-item-2" href="#real-world-examples">
            Real World Examples
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
                    
   </div>
                   
   <div class="pure-u-5-6 pure-u-md-1-2">
                                                     
    <main id="main"> 
     <h1 id="running-ocaml-in-your-browser">Running OCaml in your Browser</h1>
<p><em>Last Updated: 27, July 2020 at 09:35:49</em></p>
<hr />
<h2 id="overview">Overview</h2>
<hr />
<p>OCaml byte-code can be compiled to Javascript to run in your browser using the <code>js_of_ocaml</code> compiler linked in the libraries tag. This allows you to write statically type-checked OCaml code to run in a website rather than dynamically typed Javascript - this gives you more guarantees over what errors you will get at runtime.</p>
<h2 id="recommended-workflow">Recommended Workflow</h2>
<hr />
<h3>Js_of_ocaml</h3>
<p>Dune has built-in support for compiling byte-code to Javascript. Consider a &quot;hello-world&quot; example:</p>
<pre><code class="language-ocaml">(* main.ml *)
let () = print_endline &quot;Hello World&quot;
</code></pre>
<p>This can be built with <code>dune build</code>, provided the <code>js_of_ocaml</code> package is installed (to get the cross-compiler) and the following dune file:</p>
<pre><code>(executable
 (name main)
 (modes js))
</code></pre>
<p>This will output your main file into a Javascript file called <code>main.bc.js</code>. To get this running in your browser you can then create an <code>index.html</code> file in the same <code>_build/default</code> folder and include the JS file in a script tag: <code>&lt;script src=&quot;main.bc.js&gt;&lt;/script&gt;</code>. This is the quickest way to get started.</p>
<p>Although Javascript has many features in common with functional-styled programming, it primarily works using objects and mutable data. To make the transition from OCaml to Javascript easier, there is a <a href="https://ocsigen.org/js_of_ocaml/3.1.0/manual/ppx">PPX</a> to make objects using the OCaml syntax. Once installed, you can make objects fairly simply, make sure you add <code>(preprocess (pps js_of_ocaml-ppx))</code> to your dune file.</p>
<pre><code class="language-ocaml">let () = 
  let person = 
    object%js (self)
      val name = &quot;Alice&quot; [@@readwrite]
      method set str = self##.name := str 
      method get = self##.name
    end in 
  print_endline (person##get); (* Prints Alice *)
  person##set &quot;Bob&quot;;
  print_endline (person##get); (* Prints Bob *)
</code></pre>
<h2 id="alternatives">Alternatives</h2>
<hr />
<h3 id="bucklescript">Bucklescript</h3>
<p>An alternative is to use Bucklescript to compile your OCaml code to Javascript. At this point you will have to leave dune behind you and venture into the world of Bucklescript and <code>npm</code> - <a href="https://discuss.ocaml.org/t/js-of-ocaml-vs-bucklescript/2293/7">this post on discuss OCaml</a> might be worthwhile reading to find out which is best for you.</p>
<p><a href="https://bucklescript.github.io/">BuckleScript Â· A faster, simpler and more robust take on JavaScript.</a></p>
<h2 id="real-world-examples">Real World Examples</h2>
<hr />
<p><a href="https://github.com/janestreet/incr_dom">janestreet/incr_dom</a></p>

    </main>
                     
   </div>
                 
  </div>
            
          
        </body>
</html>
